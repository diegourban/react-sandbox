<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Basic Example</title>
    <link rel="stylesheet" href="resources/css/base.css" />
  </head>
  <body>
    <h1>Basic Example</h1>
    <div id="container">
      <p>
        To install React, follow the instructions on
        <a href="https://github.com/facebook/react/">GitHub</a>.
      </p>
      <p>
        If you can see this, React is <strong>not</strong> working right.
        If you checked out the source from GitHub make sure to run <code>grunt</code>.
      </p>
    </div>
    <script src="https://fb.me/react-15.1.0.js"></script>
	<script src="https://fb.me/react-dom-15.1.0.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.24/browser.min.js"></script>
    <script type="text/babel">
		var ProductCategoryRow = React.createClass({
			render: function() {
				return (<tr><th>{this.props.category}</th></tr>);
			}
		});
		
		var ProductRow = React.createClass({
			render: function() {
				return (
					<tr>
						<td>{this.props.product.name}</td>
						<td>{this.props.product.price}</td>
					</tr>
				);
			}
		});
		
		var ProductTable = React.createClass({
			render: function() {
				var rows = [];
				this.props.products.forEach(function(product) {
					rows.push(<ProductRow product={product} key={product.name}/>);
				});
				
				return (
					<table>
						<thead>
							<tr>
								<td>Name</td>
								<td>Price</td>
							</tr>
						</thead>
						<tbody>{rows}</tbody>
					</table>
				);
			}
		});
		
		var FilterableProductTable = React.createClass({
			render: function() {
				return (
					<div>
						<ProductTable products={this.props.products}/>
					</div>
				);
			}
		});
		
		var PRODUCTS = [
		  {category: 'Sporting Goods', price: '$49.99', stocked: true, name: 'Football'},
		  {category: 'Sporting Goods', price: '$9.99', stocked: true, name: 'Baseball'},
		  {category: 'Sporting Goods', price: '$29.99', stocked: false, name: 'Basketball'},
		  {category: 'Electronics', price: '$99.99', stocked: true, name: 'iPod Touch'},
		  {category: 'Electronics', price: '$399.99', stocked: false, name: 'iPhone 5'},
		  {category: 'Electronics', price: '$199.99', stocked: true, name: 'Nexus 7'}
		];
		
		var MyComponent = React.createClass({
			render: function() {
				return (
					<div>
						{this.props.name}
					</div>
				);
			}
		});
		// ES6
		class MyComponentES6 extends React.Component{
			render() {
				var count = React.Children.count(this.props.children);
				console.log(count);
				
				React.Children.map(this.props.children, function(child){
					console.log(child);
				});
				return (
					<div>
						{this.props.name}
					</div>
				);
			}
		};
		
		var GenericComponent = React.createClass({
			getInitialState: function() {
				return {thing: this.props.thingy};
			},
			getDefaultProps: function() {
				return {thingy: "cheese"}
			},
			render: function() {
				return (
					<div>
						{this.state.thingy}
					<div>
				)
			}
		});
		// ES6
		class GenericComponentES6 extends React.Component{
			constructor(props) {
				super(props);
				this.state = {thing : props.thingy};
			}
		};
		GenericComponentES6.defaultProps = {thingy : "cheese"};
		
		// without JSX
		//ReactDOM.render(React.createElement(MyComponentES6, {name: "frodo without JSX"}), document.getElementById('container'));
		
		// with JSX
		//ReactDOM.render(<MyComponentES6 name="frodo with JSX"/>, document.getElementById('container'));		
		
		// with 1 child
		ReactDOM.render(<MyComponentES6 name="frodo with JSX"> <p key="firsty">a child</p> </MyComponentES6>, document.getElementById('container'));		
    </script>
  </body>
</html>
